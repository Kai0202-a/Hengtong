{"ast":null,"code":"import React,{useContext,useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{UserContext}from\"../UserContext\";// 刪除這行：\n// import { partsData } from './partsData';\n// 將 parts 宣告移到 Admin 函數內部，並在每次渲染時取得最新資料：\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Admin(){const navigate=useNavigate();useEffect(()=>{const user=JSON.parse(localStorage.getItem(\"user\"));if(!user||user.role!==\"admin\"){navigate(\"/\");// 非管理員自動跳回首頁\n}},[navigate]);const{setUser}=useContext(UserContext);const[orders,setOrders]=useState([]);const[parts,setParts]=useState([]);useEffect(()=>{const interval=setInterval(()=>{const data=JSON.parse(localStorage.getItem(\"records\")||\"[]\");setOrders(data.reverse());setParts(JSON.parse(localStorage.getItem('parts')||'[]'));},1000);return()=>clearInterval(interval);},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center',width:'100%',minHeight:'100vh',background:'#181a20'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:'95vw',maxWidth:500,background:'#23272f',padding:20,borderRadius:12,color:'#f5f6fa',margin:'32px auto 24px auto',boxShadow:'0 2px 12px #0002',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:0,color:'#f5f6fa'},children:\"\\u8CA8\\u6CC1\\u63D0\\u9192\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{paddingLeft:0,maxHeight:400,overflowY:'auto',margin:0,listStyle:'none'},children:[orders.length===0&&/*#__PURE__*/_jsx(\"li\",{style:{color:'#aaa'},children:\"\\u66AB\\u7121\\u51FA\\u8CA8\\u7D00\\u9304\"}),orders.map((o,idx)=>{const part=parts.find(p=>p.name===o.partName);return/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:8,fontSize:15,color:'#f5f6fa'},children:[/*#__PURE__*/_jsx(\"b\",{children:o.company}),\" \\u65BC \",/*#__PURE__*/_jsx(\"span\",{style:{color:'#aaa'},children:o.time}),/*#__PURE__*/_jsx(\"br\",{}),\"\\u5546\\u54C1\\uFF1A\",/*#__PURE__*/_jsx(\"b\",{children:o.partName}),\"\\uFF0C\\u6578\\u91CF\\uFF1A\",/*#__PURE__*/_jsx(\"b\",{children:o.quantity}),part&&/*#__PURE__*/_jsxs(\"span\",{style:{color:'#ffd700',marginLeft:8},children:[\"\\uFF5C\\u5EAB\\u5B58\\uFF1A\",part.stock]})]},idx);})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u5F8C\\u53F0\\u7BA1\\u7406\\u7CFB\\u7D71\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:46,marginTop:42},children:[/*#__PURE__*/_jsx(\"button\",{style:{padding:16,fontSize:18},onClick:()=>navigate(\"/inventory\"),children:\"\\u5EAB\\u5B58\\u7BA1\\u7406\"}),/*#__PURE__*/_jsx(\"button\",{style:{padding:16,fontSize:18},onClick:()=>navigate(\"/shipping\"),children:\"\\u92B7\\u552E\\u7D00\\u9304\"}),/*#__PURE__*/_jsx(\"button\",{style:{padding:16,fontSize:18},children:\"\\u901A\\u8DEF\\u5546\\u5E33\\u865F\\u7BA1\\u7406\"}),/*#__PURE__*/_jsx(\"button\",{style:{padding:16,fontSize:18},children:\"\\u8CC7\\u6599\\u5099\\u4EFD/\\u9084\\u539F\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',marginTop:24},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{localStorage.removeItem(\"user\");setUser(null);navigate(\"/\");},style:{width:120,background:'#c00',color:'#fff',border:'none',borderRadius:6,padding:8},children:\"\\u767B\\u51FA\"})})]})]});}export default Admin;","map":{"version":3,"names":["React","useContext","useEffect","useState","useNavigate","UserContext","jsx","_jsx","jsxs","_jsxs","Admin","navigate","user","JSON","parse","localStorage","getItem","role","setUser","orders","setOrders","parts","setParts","interval","setInterval","data","reverse","clearInterval","style","display","flexDirection","alignItems","width","minHeight","background","children","maxWidth","padding","borderRadius","color","margin","boxShadow","textAlign","marginTop","paddingLeft","maxHeight","overflowY","listStyle","length","map","o","idx","part","find","p","name","partName","marginBottom","fontSize","company","time","quantity","marginLeft","stock","gap","onClick","justifyContent","removeItem","border"],"sources":["C:/Users/cow7353202th/Desktop/APP/car-parts-frontend/src/pages/Admin.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { UserContext } from \"../UserContext\";\r\n// 刪除這行：\r\n// import { partsData } from './partsData';\r\n\r\n// 將 parts 宣告移到 Admin 函數內部，並在每次渲染時取得最新資料：\r\nfunction Admin() {\r\n  const navigate = useNavigate();\r\n  useEffect(() => {\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n    if (!user || user.role !== \"admin\") {\r\n      navigate(\"/\"); // 非管理員自動跳回首頁\r\n    }\r\n  }, [navigate]);\r\n  const { setUser } = useContext(UserContext);\r\n  const [orders, setOrders] = useState([]);\r\n  const [parts, setParts] = useState([]);\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      const data = JSON.parse(localStorage.getItem(\"records\") || \"[]\");\r\n      setOrders(data.reverse());\r\n      setParts(JSON.parse(localStorage.getItem('parts') || '[]'));\r\n    }, 1000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n  return (\r\n    <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', width: '100%', minHeight: '100vh', background: '#181a20' }}>\r\n      {/* 置中提醒區塊 */}\r\n      <div style={{ width: '95vw', maxWidth: 500, background: '#23272f', padding: 20, borderRadius: 12, color: '#f5f6fa', margin: '32px auto 24px auto', boxShadow: '0 2px 12px #0002', textAlign: 'center' }}>\r\n        <h3 style={{ marginTop: 0, color: '#f5f6fa' }}>貨況提醒</h3>\r\n        <ul style={{ paddingLeft: 0, maxHeight: 400, overflowY: 'auto', margin: 0, listStyle: 'none' }}>\r\n          {orders.length === 0 && <li style={{ color: '#aaa' }}>暫無出貨紀錄</li>}\r\n          {orders.map((o, idx) => {\r\n            const part = parts.find(p => p.name === o.partName);\r\n            return (\r\n              <li key={idx} style={{ marginBottom: 8, fontSize: 15, color: '#f5f6fa' }}>\r\n                <b>{o.company}</b> 於 <span style={{ color: '#aaa' }}>{o.time}</span><br />\r\n                商品：<b>{o.partName}</b>，數量：<b>{o.quantity}</b>\r\n                {part && (\r\n                  <span style={{ color: '#ffd700', marginLeft: 8 }}>｜庫存：{part.stock}</span>\r\n                )}\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      </div>\r\n      {/* 後台管理系統內容區塊 */}\r\n      <div style={{ width: '100%', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\r\n        <h2>後台管理系統</h2>\r\n        <div style={{ display: \"flex\", flexDirection: \"column\", gap: 46, marginTop: 42 }}>\r\n          <button style={{ padding: 16, fontSize: 18 }} onClick={() => navigate(\"/inventory\")}>庫存管理</button>\r\n          <button style={{ padding: 16, fontSize: 18 }} onClick={() => navigate(\"/shipping\")}>銷售紀錄</button>\r\n          <button style={{ padding: 16, fontSize: 18 }}>通路商帳號管理</button>\r\n          <button style={{ padding: 16, fontSize: 18 }}>資料備份/還原</button>\r\n        </div>\r\n        <div style={{ display: 'flex', justifyContent: 'center', marginTop: 24 }}>\r\n          <button onClick={() => {\r\n            localStorage.removeItem(\"user\");\r\n            setUser(null);\r\n            navigate(\"/\");\r\n          }} style={{ width: 120, background: '#c00', color: '#fff', border: 'none', borderRadius: 6, padding: 8 }}>\r\n            登出\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Admin;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}